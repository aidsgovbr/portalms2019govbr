/*
First Time - jQuery Plugin
Â© 2014 www.binaryslash.com.  All rights reserved.
*/
;!function(a){"use strict";function f(a,b,c){var e,d=new Date;d.setTime(d.getTime()+864e5*c),e="expires="+d.toUTCString(),document.cookie=a+"="+b+"; "+e+"; path=/"}function g(a){var b,c,d,e,f;for(a+="=",b=document.cookie.split(";"),f=new RegExp("^"+a),c=0,d=b.length;d>c;c++)if(e=b[c],e=e.replace(/^\s*/,""),f.test(e))return e.substring(a.length,e.length);return""}function h(a){f(a,"",-1)}function i(c,d){function i(){for(var a=g.steps.length-1;a>=0;a--)g.steps[a].hide()}var g=this;g.options=a.extend({},e,d),g.$element=a(c),g.element=c,g.$steps=g.$element.find("."+g.options.stepClass),g.$close=g.$element.find("."+g.options.closeClass),g.close=g.$close[0],g.$hide=g.$element.find("."+g.options.hideClass),g.hide=g.$hide[0],g.$next=g.$element.find("."+g.options.nextClass),g.next=g.$next[0],g.$prev=g.$element.find("."+g.options.prevClass),g.prev=g.$prev[0],g.steps=[],g.actualStep=0,g.visible=!1,g.visits=0,g.cycle=0,g.$steps.each(function(){g.steps.push(new j(this,g,g.options))}),g.show=function(){g.$element.addClass("visible"),g.visible=!0,g.options.showFunction(g)},g.hide=function(){g.$element.removeClass("visible"),g.visible=!1,i(),g.options.hideFunction(g)},g.showStart=function(){g.$element.addClass("visible"),g.visible=!0,g.options.showStartFunction(g)},g.hideStart=function(){g.$element.removeClass("visible"),g.visible=!1,i(),g.options.hideStartFunction(g)},g.showNum=function(a){g.steps.length>0&&(g.steps[g.actualStep].hide(),g.actualStep=a,g.actualStep>g.steps.length-1&&(g.actualStep=0),g.actualStep<0&&(g.actualStep=g.steps.length-1),g.steps[g.actualStep].show())},g.showNext=function(){g.showNum(g.actualStep+1)},g.showPrev=function(){g.showNum(g.actualStep-1)},g.close=function(){f(g.options.name,"closed",g.options.expirationDays),h(g.options.name+"_cycle"),g.hide()},g.options.onPageExit?b.push(g):g.init()}function j(b,c,d){var e=this;e.options=d,e.parent=c,e.$element=a(b),e.element=b,e.show=function(){e.options.showStepFunction(e),e.$element.addClass("visible")},e.hide=function(){e.options.hideStepFunction(e),e.$element.removeClass("visible")}}var b=[],c=0,d=0,e={stepClass:"step",closeClass:"close",hideClass:"hide",nextClass:"next",prevClass:"prev",name:"firsttime",expirationDays:365,alwaysVisible:!1,cycle:!1,auto:!1,onPageExit:!1,showFunction:function(){},hideFunction:function(){},hideStartFunction:function(){},showStartFunction:function(){},showStepFunction:function(){},hideStepFunction:function(){}};a(document).mousemove(function(a){d=a.clientY-c,c=a.clientY}),a(window).mouseout(function(){if(0>d&&1.5*-d>c)for(var a=b.length-1;a>=0;a--)b[a].init();d=0,c=0}),i.prototype.init=function(){var a=this,b=g(a.options.name),c=g(a.options.name+"_cycle"),d=g(a.options.name+"_counter");a.options.cycle?c.length>0?(c=parseInt(c)+1,c<a.options.cycle?f(a.options.name+"_cycle",c.toString(),a.options.expirationDays):(c=0,f(a.options.name+"_cycle","0",a.options.expirationDays),h(a.options.name),b="")):(c=0,f(a.options.name+"_cycle","0",a.options.expirationDays)):c=0,a.cycle=c,d.length>0?(d=parseInt(d)+1,f(a.options.name+"_counter",d.toString(),a.options.expirationDays)):(d=0,f(a.options.name+"_counter","0",a.options.expirationDays)),a.visits=d,a.$close.click(function(){a.close()}),a.$hide.click(function(){a.hide()}),a.$next.click(function(){a.showNext()}),a.$prev.click(function(){a.showPrev()}),"closed"!==b||a.options.alwaysVisible?(a.showStart(),a.showNum(a.actualStep),a.options.auto&&f(a.options.name,"closed",a.options.expirationDays)):a.hideStart()},a.fn.firstTime=function(a,b){var c={show:function(a){0===b||b||(b=a.actualStep),a.visible||a.show(),a.showNum(b)},hide:function(a){a.visible&&a.hide()},close:function(a){a.close()},reset:function(a){h(a.options.name),h(a.options.name+"_cycle"),h(a.options.name+"_counter"),a.visits=0,a.cycle=0},visits:function(a){return a.visits},cycle:function(a){return a.cycle}};return"visits"===a||"cycle"===a?c[a](this[0]._firstTime):this.each(function(){var b=this._firstTime;c[a]?b&&c[a](b):b||(this._firstTime=new i(this,a))})}}(jQuery);